<!DOCTYPE html>
<html>
<head>
    <title>Test Intelligent Highlighting</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-section { margin: 20px 0; padding: 15px; background: #f9f9f9; border-radius: 8px; }
        .comparison { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0; }
        .comparison-item { padding: 10px; border-radius: 5px; }
        .old-approach { background: #ffebee; border-left: 4px solid #f44336; }
        .new-approach { background: #e8f5e8; border-left: 4px solid #4CAF50; }
    </style>
</head>
<body>
    <h1>üß† Intelligent Highlighting Test Results</h1>
    
    <div class="test-section">
        <h2>üìä Improvement Summary</h2>
        <p>The new intelligent highlighting approach now distinguishes between:</p>
        <ul>
            <li>‚úÖ <strong>Skills/Technologies</strong>: Individual terms like "React", "AWS", "Docker"</li>
            <li>‚úÖ <strong>Experience/Qualifications</strong>: Whole sections needing narrative improvement</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>üîç New Highlighting Output Analysis</h2>
        <div class="comparison">
            <div class="comparison-item old-approach">
                <h3>‚ùå Previous (Non-Intelligent)</h3>
                <ul>
                    <li>Generic addresses: <code>cv_skill_1</code></li>
                    <li>Vague reasons: "Python skill matches"</li>
                    <li>No content-type awareness</li>
                    <li>Line-based highlighting only</li>
                </ul>
            </div>
            <div class="comparison-item new-approach">
                <h3>‚úÖ Current (Intelligent)</h3>
                <ul>
                    <li>Content-aware addresses: <code>cv_position_1</code> for experiences</li>
                    <li>Specific reasons: "React development experience matches required skill"</li>
                    <li>Distinguishes skills vs. experience sections</li>
                    <li>Strategic narrative improvements</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="test-section">
        <h2>üìã Latest Highlighting Results</h2>
        <div id="results"></div>
    </div>

    <script>
        // Latest intelligent highlighting results
        const intelligentResults = {
            cv_highlighted: [
                {
                    address: "cv_position_1",
                    class: "highlight-potential",
                    reason: "Software Engineer role should emphasize leadership aspects and any cloud/infrastructure work to better align with Senior role"
                },
                {
                    address: "cv_line_1", 
                    class: "highlight-match",
                    reason: "React development experience matches required skill"
                },
                {
                    address: "cv_line_3",
                    class: "highlight-potential", 
                    reason: "API and database work could be reframed to highlight any microservices architecture experience"
                }
            ],
            jd_highlighted: [
                {
                    address: "jd_requirement_1",
                    class: "highlight-gap",
                    reason: "5+ years experience requirement exceeds candidate's ~3 years"
                },
                {
                    address: "jd_skill_3",
                    class: "highlight-gap",
                    reason: "AWS expertise required but not shown in CV"
                },
                {
                    address: "jd_skill_4",
                    class: "highlight-gap",
                    reason: "Docker/Kubernetes experience required but not mentioned"
                }
            ]
        };

        function analyzeHighlightingIntelligence() {
            const skillHighlights = [];
            const experienceHighlights = [];
            const allHighlights = [...intelligentResults.cv_highlighted, ...intelligentResults.jd_highlighted];

            allHighlights.forEach(highlight => {
                const reason = highlight.reason.toLowerCase();
                const address = highlight.address.toLowerCase();
                
                // Classify based on intelligent criteria
                if (reason.includes('skill') || reason.includes('technology') || reason.includes('required') ||
                    address.includes('skill') || /\b(react|aws|docker|python|kubernetes)\b/i.test(reason)) {
                    skillHighlights.push(highlight);
                } else if (reason.includes('experience') || reason.includes('role') || reason.includes('position') ||
                          reason.includes('emphasize') || reason.includes('reframed') || address.includes('position')) {
                    experienceHighlights.push(highlight);
                }
            });

            return {
                total: allHighlights.length,
                skillHighlights: skillHighlights.length,
                experienceHighlights: experienceHighlights.length,
                skillDetails: skillHighlights,
                experienceDetails: experienceHighlights
            };
        }

        const analysis = analyzeHighlightingIntelligence();

        document.getElementById('results').innerHTML = `
            <div style="margin: 15px 0;">
                <h3>üéØ Intelligence Analysis Results</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; text-align: center;">
                    <div style="padding: 15px; background: #e3f2fd; border-radius: 8px;">
                        <div style="font-size: 24px; font-weight: bold; color: #1976d2;">${analysis.total}</div>
                        <div>Total Highlights</div>
                    </div>
                    <div style="padding: 15px; background: #fff3e0; border-radius: 8px;">
                        <div style="font-size: 24px; font-weight: bold; color: #f57c00;">${analysis.skillHighlights}</div>
                        <div>Skill-Level</div>
                    </div>
                    <div style="padding: 15px; background: #f3e5f5; border-radius: 8px;">
                        <div style="font-size: 24px; font-weight: bold; color: #7b1fa2;">${analysis.experienceHighlights}</div>
                        <div>Experience-Level</div>
                    </div>
                </div>
            </div>

            <div style="margin: 20px 0;">
                <h4>üîß Skill-Level Highlights (Individual Terms):</h4>
                ${analysis.skillDetails.map((h, i) => `
                    <div style="margin: 8px 0; padding: 10px; background: #fff3e0; border-left: 4px solid #ff9800; border-radius: 4px;">
                        <strong>${h.address}</strong> (${h.class}): ${h.reason}
                    </div>
                `).join('')}
            </div>

            <div style="margin: 20px 0;">
                <h4>üìù Experience-Level Highlights (Narrative Sections):</h4>
                ${analysis.experienceDetails.map((h, i) => `
                    <div style="margin: 8px 0; padding: 10px; background: #f3e5f5; border-left: 4px solid #9c27b0; border-radius: 4px;">
                        <strong>${h.address}</strong> (${h.class}): ${h.reason}
                    </div>
                `).join('')}
            </div>

            <div style="margin: 20px 0; padding: 15px; background: #e8f5e8; border-left: 4px solid #4caf50; border-radius: 4px;">
                <h4>‚úÖ Intelligence Verification</h4>
                <p><strong>Skills targeting:</strong> Individual technical terms (React, AWS, Docker) ‚úì</p>
                <p><strong>Experience targeting:</strong> Narrative improvements and role positioning ‚úì</p>
                <p><strong>Content-aware addressing:</strong> Different strategies for different content types ‚úì</p>
                <p><strong>Strategic recommendations:</strong> Focus on CV optimization, not new skills ‚úì</p>
            </div>
        `;
    </script>
</body>
</html>